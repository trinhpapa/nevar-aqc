var customerManagement=function(){var n={getPagedAsync:function(n,t,i){$(customerManagement.htmlTag.contentData).LoadingTable();$.ajax({type:"POST",data:{pageIndex:n,pageSize:t,searchString:i},url:"/Customer/GetPagedAsync",success:function(t){$(customerManagement.htmlTag.contentData).LoadedTable();$(customerManagement.htmlTag.contentData).html(t);$(customerManagement.htmlTag.paginationTag).paginationBinding(n,15)},error:function(n){throw"Get customer error:"+n;}})},createCustomerAsync:function(){$(customerManagement.htmlTag.submitForm).buttonLoading();let n=customerManagement.handleEvent.claimFormData();$.ajax({type:"POST",data:n,url:"/Customer/CreateAsync",success:function(){customerManagement.ajaxRequest.getPagedAsync(1,15,null);$(customerManagement.htmlTag.submitForm).buttonLoaded(!0);$(customerManagement.htmlTag.hideForm).click();toastr.success("Tạo khách hàng thành công","Thông báo:")},error:function(n){$(customerManagement.htmlTag.submitForm).buttonLoaded(!1);toastr.error(n.responseText,"Thông báo:")}})},getByIdAsync:function(n){$.ajax({type:"POST",data:{customerId:n},url:"/Customer/GetByIdAsync",success:function(n){n=JSON.parse(n);$(customerManagement.htmlTag.customerName).val(n.Name);$(customerManagement.htmlTag.customerType).val(n.CustomerTypeId);$(customerManagement.htmlTag.customerPhone).val(n.PhoneNumber);$(customerManagement.htmlTag.customerFax).val(n.Fax);$(customerManagement.htmlTag.customerEmail).val(n.Email);$(customerManagement.htmlTag.customerAddress).val(n.Address);$(customerManagement.htmlTag.customerNote).val(n.Note)},error:function(n){console.log(n.responseText)}})},updateAsync:function(n){$(customerManagement.htmlTag.updateForm).buttonLoading();let t=customerManagement.handleEvent.claimFormData();t.Id=n;$.ajax({type:"POST",data:t,url:"/Customer/UpdateAsync",success:function(){customerManagement.ajaxRequest.getPagedAsync(1,15,null);$(customerManagement.htmlTag.updateForm).buttonLoaded(!0);$(customerManagement.htmlTag.hideForm).click();toastr.success("Cập nhật thành công","Thông báo:")},error:function(n){$(customerManagement.htmlTag.updateForm).buttonLoaded(!1);toastr.error(n.responseText,"Thông báo:")}})}},t={claimFormData:function(){let n=$(customerManagement.htmlTag.customerName).val();if(n.length<1){$(customerManagement.htmlTag.submitForm).buttonLoaded(!1);toastr.error("Tên không được để trống","Cảnh báo:");$(customerManagement.htmlTag.customerName).focus();throw"customer name is required";}let t=parseInt($(customerManagement.htmlTag.customerType).val()),i=$(customerManagement.htmlTag.customerPhone).val(),r=$(customerManagement.htmlTag.customerFax).val(),u=$(customerManagement.htmlTag.customerEmail).val(),f=$(customerManagement.htmlTag.customerAddress).val(),e=$(customerManagement.htmlTag.customerNote).val();return{Name:n,CustomerTypeId:t,PhoneNumber:i,Fax:r,Email:u,Address:f,Note:e}}};return{htmlTag:{contentData:"#content-data",paginationTag:"#pagination-tag",searchFilterForm:"#search-filter-form",searchFilterContent:"#search-filter",modalCustomerForm:"#modal-customer-form",customerForm:"#customer-form",hideForm:"#hide-form",submitForm:"#submit-form",updateForm:"#update-form",customerName:"#customer-name",customerType:"#customer-type",customerPhone:"#customer-phone",customerFax:"#customer-fax",customerEmail:"#customer-email",customerAddress:"#customer-address",customerNote:"#customer-note"},bindingData:{},ajaxRequest:n,handleEvent:t}}();