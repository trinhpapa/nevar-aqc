var userManagement=function(){var n={getAllUserAsync:function(n,t,i){$(userManagement.htmlTag.contentData).LoadingTable();$.ajax({type:"POST",data:{pageIndex:n,pageSize:t,searchString:i},url:"/User/GetPagedAsync",success:function(t){$(userManagement.htmlTag.contentData).LoadedTable();$(userManagement.htmlTag.contentData).html(t);$(userManagement.htmlTag.paginationTag).paginationBinding(n,15)},error:function(n){throw"Get user error:"+n;}})},getByIdAsync:function(n){$.ajax({type:"POST",data:{id:n},url:"/User/GetByIdAsync",success:function(n){userManagement.bindingData.bindingUpdate(JSON.parse(n))},error:function(n){throw"Get user error:"+n;}})},createUserAsync:function(){$(userManagement.htmlTag.loadingForm).show();const n=userManagement.handleEvent.claimCreateFormData();$.ajax({type:"POST",data:n,url:"/User/CreateAsync",success:function(){userManagement.ajaxRequest.getAllUserAsync(1,15,null);$(userManagement.htmlTag.loadingForm).hide();$(userManagement.htmlTag.hideForm).click();toastr.success("Tạo tài khoản thành công","Thông báo:")},error:function(n){$(userManagement.htmlTag.loadingForm).hide();toastr.error(n.responseText,"Thông báo:")}})},updateUserAsync:function(){$(userManagement.htmlTag.loadingUpdateForm).show();const n=userManagement.handleEvent.claimUpdateFormData();$.ajax({type:"POST",data:n,url:"/User/UpdateAsync",success:function(){userManagement.ajaxRequest.getAllUserAsync(1,15,null);$(userManagement.htmlTag.loadingUpdateForm).hide();$(userManagement.htmlTag.hideUpdateForm).click();toastr.success("Cập nhật tài khoản thành công","Thông báo:")},error:function(n){$(userManagement.htmlTag.loadingUpdateForm).hide();toastr.error(n.responseText,"Thông báo:")}})},resetPasswordAsync:function(n){$.ajax({type:"POST",data:{Id:n},url:"/User/UpdatePasswordAsync",success:function(n){toastr.success(`Reset mật khẩu thành công: ${n}`,"Thông báo:")},error:function(n){toastr.error(n.responseText,"Thông báo:")}})}},t={bindingUpdate:function(n){$(userManagement.htmlTag.userIdUdpateForm).val(n.Id);$(userManagement.htmlTag.usernameUpdateForm).val(n.Username);$(userManagement.htmlTag.displayNameUpdateForm).val(n.DisplayName);n.ActiveStatus===!0?$("#ActiveStatusTrueUpdate").prop("checked",!0):$("#ActiveStatusFalseUpdate").prop("checked",!0);$(userManagement.htmlTag.departmentUpdateForm).val(n.DepartmentId).trigger("change");$(userManagement.htmlTag.roleUpdateForm).val(n.RoleId).trigger("change");$(userManagement.htmlTag.noteUpdateForm).val(n.Note)}};const i={claimCreateFormData:function(){const t=$(userManagement.htmlTag.usernameForm).val();if(t.length===0){$(userManagement.htmlTag.loadingForm).hide();toastr.error("Tên đăng nhập không được để trống!","Cảnh báo:");throw"Username not allow null";}const i=$(userManagement.htmlTag.displayNameForm).val();if(i.length===0){$(userManagement.htmlTag.loadingForm).hide();toastr.error("Tên hiển thị không được để trống!","Cảnh báo:");throw"Display name not allow null";}const u=$(userManagement.htmlTag.activeStatusForm).val(),n=$(userManagement.htmlTag.passwordForm).val();if(n.length===0){$(userManagement.htmlTag.loadingForm).hide();toastr.error("Mật khẩu không được để trống!","Cảnh báo:");throw"Password not allow null";}const r=$(userManagement.htmlTag.rePasswordForm).val();if(r.length===0){$(userManagement.htmlTag.loadingForm).hide();toastr.error("Mật khẩu không được để trống!","Cảnh báo:");throw"Password not allow null";}const f=$(userManagement.htmlTag.departmentForm).val(),e=$(userManagement.htmlTag.roleForm).val(),o=$(userManagement.htmlTag.noteForm).val();if(n!==r){$(userManagement.htmlTag.loadingForm).hide();toastr.error("Mật khẩu không trùng khớp!","Cảnh báo:");throw"Password dont match";}return{Username:t.trim(),DisplayName:i.trim(),ActiveStatus:u,PasswordOrigin:n,DepartmentId:f,RoleId:e,Note:o}},claimUpdateFormData:function(){const i=$(userManagement.htmlTag.userIdUdpateForm).val(),n=$(userManagement.htmlTag.usernameUpdateForm).val();if(n.length===0){$(userManagement.htmlTag.loadingUpdateForm).hide();toastr.error("Tên đăng nhập không được để trống!","Cảnh báo:");throw"Username not allow null";}const t=$(userManagement.htmlTag.displayNameUpdateForm).val();if(t.length===0){$(userManagement.htmlTag.loadingUpdateForm).hide();toastr.error("Tên hiển thị không được để trống!","Cảnh báo:");throw"Display name not allow null";}const r=$(userManagement.htmlTag.activeStatusUpdateForm).val(),u=$(userManagement.htmlTag.departmentUpdateForm).val(),f=$(userManagement.htmlTag.roleUpdateForm).val(),e=$(userManagement.htmlTag.noteUpdateForm).val();return{Id:i,Username:n.trim(),DisplayName:t.trim(),ActiveStatus:r,DepartmentId:u,RoleId:f,Note:e}},resetCreateForm:function(){$(userManagement.htmlTag.userForm)[0].reset()}};return{htmlTag:{userForm:"#user-form",searchFilterForm:"#search-filter-form",searchFilterContent:"#search-filter",resetForm:"#reset-form",hideForm:"#hide-form",submitForm:"#submit-form",loadingForm:"#loading-form",resetUpdateForm:"#reset-update-form",hideUpdateForm:"#hide-update-form",submitUpdateForm:"#submit-update-form",loadingUpdateForm:"#loading-update-form",modalCreateUserForm:"#modal-create-user-form",modalUpdateUserForm:"#modal-update-user-form",contentData:"#content-data",paginationTag:"#pagination-tag",usernameForm:"#username",displayNameForm:"#display-name",activeStatusForm:"input[name=active-status]:checked",passwordForm:"#password",rePasswordForm:"#re-password",departmentForm:"#department",roleForm:"#role",noteForm:"#note",usernameUpdateForm:"#username-update",userIdUdpateForm:"#user-id",displayNameUpdateForm:"#display-name-update",activeStatusUpdateForm:"input[name=active-status-update]:checked",departmentUpdateForm:"#department-update",roleUpdateForm:"#role-update",noteUpdateForm:"#note-update"},bindingData:t,ajaxRequest:n,handleEvent:i}}();