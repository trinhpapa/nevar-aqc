function FnButtonLoading(){let n="",t=!0;$.fn.buttonLoading=function(i,r){(i===undefined||i===null)&&(i='<i class="fas fa-spinner-third fa-spin"><\/i> '+i);r!==undefined&&(t=r);n=$(this).html();$(this).html(i);$(this).prop("disabled",!0);console.log(n)};$.fn.buttonLoading=function(i){i!==undefined&&(t=i);n=$(this).html();$(this).html('<i class="fas fa-spinner-third fa-spin"><\/i> Đang xử lý...');$(this).prop("disabled",!0)};$.fn.buttonLoaded=function(i){$(this).html(n);$(this).prop("disabled",!1);i===undefined&&t===!0&&$(this).hide()}}function setLeftControlHover(){let n=!1;$(htmlTag.LeftControl).hover(function(){window.outerWidth>768&&jqItem.LeftControl.outerWidth()===55&&(maxtifyLeftControl(),n=!0)},function(){n===!0&&(mintifyLeftControl(),n=!1)})}function settingToastr(){toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!1,positionClass:"toast-bottom-left",preventDuplicates:!0,onclick:null,showDuration:"200",hideDuration:"200",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}function setActiveLeftControl(){window.location.pathname.toLowerCase()==="/"?$(".left-control").find(".item").first().addClass("active"):$.each($(".left-control").find(".item"),function(){$(this).hasClass("item-tree")?$.each($(this).find("li > a"),function(){window.location.pathname.toLowerCase()===$(this).attr("href")&&($(this).parents(".item-tree").addClass("active"),$(this).parents(".item-tree").find("ul").slideToggle(0),$(this).parent().addClass("active"))}):window.location.pathname.toLowerCase()===$(this).find("a").attr("href")&&$(this).addClass("active")})}function loadUserInformation(){let n=JSON.parse(window.localStorage.getItem("user-profile"));$(htmlTag.DisplayName).html(n.displayName)}function mintifyLeftControl(){jqItem.ControlExpand.html('<i class="fa fa-indent fa-fw"><\/i>');jqItem.LeftControl.css("width","55px");jqItem.Main.css("width","calc(100% - 55px)");$(".control-item>.item-tree.active>ul").hide()}function maxtifyLeftControl(){jqItem.ControlExpand.html('<i class="fa fa-outdent fa-fw"><\/i>');jqItem.LeftControl.css("width","235px");jqItem.Main.css("width","calc(100% - 235px)");$(".control-item>.item-tree.active>ul").show()}function convertCentimetersToInches(n){return(n*.3937).toFixed(2)}function convertInchesToCentimeters(n){return(n/.3937).toFixed(2)}function ToJavaScriptFullDate(n){var t=new Date(n);let i=t.getHours(),r=t.getMinutes(),e=t.getSeconds(),u=t.getDate(),f=t.getMonth()+1,o=t.getFullYear();return(i<10?"0":"")+i+":"+(r<10?"0":"")+r+":"+e+" - "+(u<10?"0":"")+u+"/"+(f<10?"0":"")+f+"/"+o}const systemHub=(new signalR.HubConnectionBuilder).withUrl("/systemHub").build();systemHub.start().catch(function(n){console.log(n)});let todayFull=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),todayDateVN=(todayFull.getDate()<10?"0"+todayFull.getDate():todayFull.getDate())+"/"+((new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1)+"/"+(new Date).getFullYear();const topPrintMargin="2",bottomPrintMargin="0.35",leftPrintMargin="0.35",rightPrintMargin="0.25";let htmlTag=new function(){this.ControlExpand="#control-expand";this.LeftControl=".left-control";this.Main=".main";this.LoadingScreen=".loading-screen";this.DisplayName="#displayname"},jqItem=new function(){this.ControlExpand=$(htmlTag.ControlExpand);this.LeftControl=$(htmlTag.LeftControl);this.Main=$(htmlTag.Main);this.LoadingScreen=$(htmlTag.LoadingScreen)};$(document).ready(function(){loadUserInformation();settingToastr();setActiveLeftControl();$.fn.toggleDisabled=function(){return this.each(function(){this.disabled=!this.disabled})};$.fn.paginationBinding=function(n){n=parseInt(n);let i='<li class="page-item" disabled><button class="page-link" >...<\/button><\/li>',t=$(this).data("pages");if($(this).empty(),$(this).append('<li class="page-item"><button bl-tooltip="Trang đầu tiên" class="page-link link-previous"><i class="fa fa-chevron-left" aria-hidden="true"><\/i><\/button><\/li>'),t>0&&n<=t){n>3&&$(this).append(i);let r=n-2,u=n+2;for(let i=r;i<=u;i++)i>0&&i<=t&&(i===parseInt(n)?$(this).append('<li class="page-item active"><button class="page-link link-number" data-value="'+i+'">'+i+"<\/button><\/li>"):$(this).append('<li class="page-item"><button class="page-link link-number" data-value="'+i+'">'+i+"<\/button><\/li>"));t-n>=3&&$(this).append(i)}$(this).append('<li class="page-item"><button br-tooltip="Trang cuối cùng" class="page-link link-next"><i class="fa fa-chevron-right" aria-hidden="true"><\/i><\/button><\/li>')};$.fn.LoadingTable=function(){$(this).html('<div style="text-align: center; font-size: 14px; color: #999; align-item: center"><i class="fas fa-circle-notch fa-spin fa-2x fa-fw"><\/i><br/>Đang tải dữ liệu<\/div>')};$.fn.LoadedTable=function(){$(this).empty()};$.fn.LoadingContent=function(){$(this).html('<div style="text-align: center; font-size: 14px; color: #999; align-item: center"><i class="fas fa-circle-notch fa-spin fa-2x fa-fw"><\/i><\/div>')};$.fn.LoadedContent=function(){$(this).empty()};setLeftControlHover();FnButtonLoading()});$(document).on("click",".toggle-screen-modal",function(n){n.preventDefault();$(this).parents(".modal-dialog").toggleClass("modal-screen");$(this).find("i").toggleClass("fa-compress-arrows-alt fa-expand-arrows")});$(document).on("click",".toggle-super-modal",function(n){n.preventDefault();$(this).parents(".modal-dialog").toggleClass("modal-super");$(this).find("i").toggleClass("fa-compress-arrows-alt fa-expand-arrows")});$(document).on("click",".toggle-lg-modal",function(n){n.preventDefault();$(this).parents(".modal-dialog").toggleClass("modal-lg");$(this).find("i").toggleClass("fa-compress-arrows-alt fa-expand-arrows")});$(document).on("click",".control-item .item a",function(n){n.preventDefault();$(this).parent().hasClass("item-tree")?window.location.pathname.toLowerCase()!==$(this).parent().find("li.active > a").attr("href")&&($(this).parent().toggleClass("active"),$(this).parent().find("ul").slideToggle(300)):window.location.href=$(this).attr("href")});jqItem.ControlExpand.click(function(){window.outerWidth>768?jqItem.LeftControl.outerWidth()===235?mintifyLeftControl():maxtifyLeftControl():jqItem.LeftControl.outerWidth()===235?(jqItem.ControlExpand.html('<i class="fa fa-indent fa-fw"><\/i>'),jqItem.LeftControl.css("width","0"),jqItem.Main.css("width","100%")):(jqItem.ControlExpand.html('<i class="fa fa-outdent fa-fw"><\/i>'),jqItem.LeftControl.css("width","235px"),jqItem.Main.css("width","calc(100% - 235px)"))});$(document).find(".child-modal").on("hidden.bs.modal",function(){$("body").addClass("modal-open")});$("#user-setting-modal").on("show.bs.modal",function(){$("#user-setting-form")[0].reset();let n=JSON.parse(window.localStorage.getItem("user-profile"));$(this).find("#username-setting").val(n.username);$(this).find("#display-name-setting").val(n.displayName)});$("#submit-setting-form").click(function(){$.confirm({message:"Xác nhận đổi mật khẩu?",onOk:function(){let r=$("#username-setting").val(),t=$("#old-password-setting").val();if(t.length<1){$("#old-password-setting").focus();toastr.error("Mật khẩu cũ không được để trống!","Cảnh báo:");throw"Old password is required";}let n=$("#password-setting").val();if(n.length<1){$("#password-setting").focus();toastr.error("Mật khẩu không được để trống!","Cảnh báo:");throw"Password is required";}if(n===t){$("#password-setting").focus();toastr.error("Mật khẩu mới không được trùng mật khẩu cũ!","Cảnh báo:");throw"Password dont match";}let i=$("#re-password-setting").val();if(i.length<1){$("#re-password-setting").focus();toastr.error("Mật khẩu không được để trống!","Cảnh báo:");throw"Password is required";}if(n!==i){$("#re-password-setting").focus();toastr.error("Mật khẩu mới không trùng khớp!","Cảnh báo:");throw"Password don't match";}$("#submit-setting-form").buttonLoading();$.ajax({type:"POST",data:{Username:r,PasswordOld:t,PasswordOrigin:n},url:"/User/UpdatePasswordAsync",success:function(){$("#submit-setting-form").buttonLoaded(!1);toastr.success("Đổi mật khẩu thành công!","Thông báo:")},error:function(n){$("#submit-setting-form").buttonLoaded(!1);toastr.error(n.responseText,"Thông báo:")}})}})});$("#modal-print-option").on("show.bs.modal",function(){$(this).find("#topPrintMargin").val(convertInchesToCentimeters(topPrintMargin));$(this).find("#bottomPrintMargin").val(convertInchesToCentimeters(bottomPrintMargin));$(this).find("#leftPrintMargin").val(convertInchesToCentimeters(leftPrintMargin));$(this).find("#rightPrintMargin").val(convertInchesToCentimeters(rightPrintMargin));$(this).find(".printer-setting-content").css("top",$("#topPrintMargin").val()*10+"px");$(this).find(".printer-setting-content").css("bottom",$("#bottomPrintMargin").val()*10+"px");$(this).find(".printer-setting-content").css("left",$("#leftPrintMargin").val()*10+"px");$(this).find(".printer-setting-content").css("right",$("#rightPrintMargin").val()*10+"px")});$("#topPrintMargin, #bottomPrintMargin, #leftPrintMargin, #rightPrintMargin").keyup(function(){$(".printer-setting-content").css("top",$("#topPrintMargin").val()*10+"px");$(".printer-setting-content").css("bottom",$("#bottomPrintMargin").val()*10+"px");$(".printer-setting-content").css("left",$("#leftPrintMargin").val()*10+"px");$(".printer-setting-content").css("right",$("#rightPrintMargin").val()*10+"px")});$("#topPrintMargin, #bottomPrintMargin, #leftPrintMargin, #rightPrintMargin").change(function(){$(".printer-setting-content").css("top",$("#topPrintMargin").val()*10+"px");$(".printer-setting-content").css("bottom",$("#bottomPrintMargin").val()*10+"px");$(".printer-setting-content").css("left",$("#leftPrintMargin").val()*10+"px");$(".printer-setting-content").css("right",$("#rightPrintMargin").val()*10+"px")});